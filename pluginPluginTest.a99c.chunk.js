(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{316:function(e,t,n){"use strict";n.r(t);var s=n(0);t.default=s.createElement("div",{className:"markdown-body"},s.createElement("div",null,s.createElement("h1",null,"Plugin test"),s.createElement("p",null,"Itâ€™s recommended to write plug-ins in units of function. For example judege whether there is a ",s.createElement("code",null,"components")," folder:"),s.createElement("p",null,s.createElement("strong",null,s.createElement("code",null,"src/methods.ts"))),s.createElement("pre",null,s.createElement("code",{className:"language-typescript"},s.createElement("span",{className:"hljs-keyword"},"export")," ",s.createElement("span",{className:"hljs-function"},s.createElement("span",{className:"hljs-keyword"},"function")," ",s.createElement("span",{className:"hljs-title"},"judgeHasComponents"),"(",s.createElement("span",{className:"hljs-params"},"projectRootPath: string, files: path.ParsedPath[]"),") "),"{","\n","  ",s.createElement("span",{className:"hljs-keyword"},"return")," files.some(",s.createElement("span",{className:"hljs-function"},s.createElement("span",{className:"hljs-params"},"file")," =>")," ","{","\n","    ",s.createElement("span",{className:"hljs-keyword"},"const")," relativePath = path.relative(projectRootPath, path.join(file.dir, file.name))","\n","    ",s.createElement("span",{className:"hljs-keyword"},"if")," (relativePath.startsWith(",s.createElement("span",{className:"hljs-string"},'"src/components"'),")) ","{","\n","      ",s.createElement("span",{className:"hljs-keyword"},"return")," ",s.createElement("span",{className:"hljs-literal"},"true"),"\n","    ","}","\n","    ",s.createElement("span",{className:"hljs-keyword"},"return")," ",s.createElement("span",{className:"hljs-literal"},"false"),"\n","  ","}",")","\n","}","\n")),s.createElement("p",null,"So we can test it completely:"),s.createElement("p",null,s.createElement("strong",null,s.createElement("code",null,"tests/index.ts"))),s.createElement("pre",null,s.createElement("code",{className:"language-typescript"},"test(",s.createElement("span",{className:"hljs-string"},'"Multiple files"'),", t => ","{","\n","  ",s.createElement("span",{className:"hljs-keyword"},"const")," relativeProjectFiles = [","\n","    ",s.createElement("span",{className:"hljs-string"},'"src/components/index.tsx"'),",","\n","    ",s.createElement("span",{className:"hljs-string"},'"src/components/button/index.tsx"'),",","\n","    ",s.createElement("span",{className:"hljs-string"},'"src/components/select/index.tsx"'),"\n","  ","]","\n","  ","t.true(judgeHasComponents(testProjectRootPath, testFilePaths(relativeProjectFiles)))","\n","}",")","\n")),s.createElement("p",null,"And we can safely use this ",s.createElement("code",null,"judgeHasComponents")," function:"),s.createElement("p",null,s.createElement("strong",null,s.createElement("code",null,"src/index.ts"))),s.createElement("pre",null,s.createElement("code",{className:"language-typescript"},"instance.project.onAnalyseProject(",s.createElement("span",{className:"hljs-function"},s.createElement("span",{className:"hljs-params"},"files")," =>")," ","{","\n","  ",s.createElement("span",{className:"hljs-keyword"},"return")," ","{","\n","    ",s.createElement("span",{className:"hljs-attr"},"customPlugin"),": ","{","\n","      ",s.createElement("span",{className:"hljs-attr"},"hasComponents"),": judgeHasComponents(projectRootPath, files)","\n","    ","}","\n","  ","}","\n","}",")","\n")),s.createElement("h2",null,"Run test"),s.createElement("pre",null,s.createElement("code",{className:"language-bash"},"npm ",s.createElement("span",{className:"hljs-built_in"},"test"),"\n")),s.createElement("pre",null,s.createElement("code",{className:"language-bash"},"  ","3 passed","\n","------------|----------|----------|----------|----------|-------------------|","\n","File","        ","|","  ","% Stmts | % Branch |","  ","% Funcs |","  ","% Lines | Uncovered Line ",s.createElement("span",{className:"hljs-comment"},"#s |"),"\n","------------|----------|----------|----------|----------|-------------------|","\n","All files","   ","|","      ","100 |","      ","100 |","      ","100 |","      ","100 |","                   ","|","\n"," methods.ts |","      ","100 |","      ","100 |","      ","100 |","      ","100 |","                   ","|","\n","------------|----------|----------|----------|----------|-------------------|","\n"))))}}]);